{"version":3,"file":"todo.js","mappings":"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","sources":["webpack://js-rest-spa/./src/todo.js"],"sourcesContent":["\"use strict\";\r\n(function () {\r\n    const MESSAGES = {\r\n        networkError: 'Trouble connecting to the network.  Please try again',\r\n        invalidValue: 'The number is 0, cannot decrease ',\r\n        requiredUsername: 'Require username, please input',\r\n        dogInsufficient: 'Invalid username, it cannot be \"dog\".',\r\n        authInsufficient: 'No special characters!',\r\n        default: 'Something went wrong.  Please try again',\r\n    };\r\n\r\n    checkForSession();\r\n    addAbilityToLogin();\r\n    addAbilityToLogout();\r\n    addAbilityToIncrease();\r\n    addAbilityToDecrease();\r\n\r\n    function setLoggedIn(isLoggedIn) {\r\n        const contentEl = document.querySelector('.content');\r\n        const loginHtml = `\r\n        <div class=\"login\">\r\n        <form action=\"#\">\r\n          <label>\r\n            <span>Username:</span>\r\n          </label>\r\n          <input class=\"login__username\">\r\n          <button class=\"login__button\" type=\"button\">Login</button>\r\n        </form>\r\n        </div>\r\n        `;\r\n        const loggedinHtml = `\r\n        <div class=\"homePage\">\r\n        <button class=\"logout\">Logout</button>\r\n        <div class=\"inventory_form\">\r\n          <button class=\"decrease\">-</button>\r\n          <span></span>\r\n          <button class=\"increase\">+</button>\r\n        </div>\r\n        </div>\r\n        `;\r\n        if (isLoggedIn) {\r\n            contentEl.innerHTML = loggedinHtml;\r\n        } else {\r\n            contentEl.innerHTML = loginHtml;\r\n        }\r\n        renderStatus('');\r\n    }\r\n\r\n    function checkForSession() {\r\n        fetchSession()\r\n            .then((num) => {\r\n                setLoggedIn(true);\r\n                render(num);\r\n            })\r\n            .catch(() => setLoggedIn(false));\r\n    }\r\n\r\n    function fetchSession() {\r\n        return fetch('/api/session', {\r\n            method: 'GET',\r\n        })\r\n            .catch(() => Promise.reject({ error: 'networkError' }))\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                return response.json()\r\n                    .catch(error => Promise.reject({ error }))\r\n                    .then(err => Promise.reject(err));\r\n            });\r\n    }\r\n\r\n    function fetchLogin(username) {\r\n        return fetch('/api/session', {\r\n            method: 'POST',\r\n            headers: new Headers({\r\n                'content-type': 'application/json'\r\n            }),\r\n            body: JSON.stringify({ username }),\r\n        })\r\n            .catch(() => Promise.reject({ error: 'networkError' }))\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                return response.json()\r\n                    .catch(error => Promise.reject({ error }))\r\n                    .then(err => Promise.reject(err));\r\n            });\r\n    }\r\n\r\n    function fetchLogout() {\r\n        return fetch('/api/session', {\r\n            methos: 'DELETE',\r\n        })\r\n            .catch(() => Promise.reject({ error: 'networkError' }))\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                return response.json()\r\n                    .catch(error => Promise.reject({ error }))\r\n                    .then(err => Promise.reject(err));\r\n            });\r\n    }\r\n\r\n    function fetchIncrease(number) {\r\n        return fetch('/api/todo', {\r\n            method: 'POST',\r\n            headers: new Headers({\r\n                'content-type': 'application/json'\r\n            }),\r\n            body: JSON.stringify({ number }),\r\n        })\r\n            .catch(() => Promise.reject({ error: 'networkError' }))\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                return response.json()\r\n                    .catch(error => Promise.reject({ error }))\r\n                    .then(err => Promise.reject(err));\r\n            });\r\n    }\r\n\r\n    function fetchDecrease(number) {\r\n        return fetch('/api/todo', {\r\n            method: 'POST',\r\n            headers: new Headers({\r\n                'content-type': 'application/json'\r\n            }),\r\n            body: JSON.stringify({ number }),\r\n        })\r\n            .catch(() => Promise.reject({ error: 'networkError' }))\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                return response.json()\r\n                    .catch(error => Promise.reject({ error }))\r\n                    .then(err => Promise.reject(err));\r\n            });\r\n    }\r\n\r\n    function addAbilityToLogin() {\r\n        const buttonEl = document.querySelector('main');\r\n        buttonEl.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            if (!e.target.classList.contains('login__button')) {\r\n                return;\r\n            }\r\n            const usernameEl = document.querySelector('.login__username');\r\n            const username = usernameEl.value;\r\n            fetchLogin(username)\r\n                .then((num) => {\r\n                    setLoggedIn(true);\r\n                    render(num);\r\n                })\r\n                .catch(error => renderStatus(error));\r\n        });\r\n    }\r\n\r\n    function addAbilityToLogout() {\r\n        const buttonEl = document.querySelector('main');\r\n        buttonEl.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            if (!e.target.classList.contains('logout')) {\r\n                return;\r\n            }\r\n            fetchLogout()\r\n                .then(() => setLoggedIn(false))\r\n                .catch(error => renderStatus(error));\r\n        });\r\n    }\r\n\r\n    function addAbilityToIncrease() {\r\n        const buttonEl = document.querySelector('main');\r\n        buttonEl.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            if (!e.target.classList.contains('increase')) {\r\n                return;\r\n            }\r\n            const decreaseButtonEl = document.querySelector('.decrease');\r\n            const num = document.querySelector('.inventory_form span').innerText;\r\n            const addNum = Number(num) + 1;\r\n            decreaseButtonEl.removeAttribute('disabled');\r\n            fetchIncrease(addNum)\r\n                .then(() => {\r\n                    render(addNum);\r\n                    renderStatus('');\r\n                })\r\n                .catch(error => renderStatus(error));\r\n        });\r\n    }\r\n\r\n    function addAbilityToDecrease() {\r\n        const buttonEl = document.querySelector('main');\r\n        buttonEl.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            if (!e.target.classList.contains('decrease')) {\r\n                return;\r\n            }\r\n            const num = document.querySelector('.inventory_form span').innerText;\r\n            const reduceNum = Number(num) - 1;\r\n            if(reduceNum == 0) {\r\n                e.target.setAttribute(\"disabled\", \"\");\r\n            }\r\n            fetchDecrease(reduceNum)\r\n                .then(() => {\r\n                    render(reduceNum);\r\n                    renderStatus('');\r\n                })\r\n                .catch(error => renderStatus(error));\r\n        });\r\n    }\r\n\r\n    function render(num) {\r\n        const numberEl = document.querySelector('.inventory_form span')\r\n        numberEl.innerText = num;\r\n    }\r\n\r\n    function renderStatus(message) {\r\n        const statusEl = document.querySelector('.status');\r\n        if (!message) {\r\n            statusEl.innerText = '';\r\n            return;\r\n        }\r\n        const key = message?.error ? message.error : 'default';\r\n        statusEl.innerText = MESSAGES[key] || MESSAGES.default;\r\n    }\r\n})();"],"names":["MESSAGES","networkError","invalidValue","requiredUsername","dogInsufficient","authInsufficient","checkForSession","addAbilityToLogin","addAbilityToLogout","addAbilityToIncrease","addAbilityToDecrease","setLoggedIn","isLoggedIn","contentEl","document","querySelector","loginHtml","loggedinHtml","innerHTML","renderStatus","fetchSession","then","num","render","fetch","method","Promise","reject","error","response","ok","json","err","fetchLogin","username","headers","Headers","body","JSON","stringify","fetchLogout","methos","fetchIncrease","number","fetchDecrease","buttonEl","addEventListener","e","preventDefault","target","classList","contains","usernameEl","value","decreaseButtonEl","innerText","addNum","Number","removeAttribute","reduceNum","setAttribute","numberEl","message","statusEl","key"],"sourceRoot":""}